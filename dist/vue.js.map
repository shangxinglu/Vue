{"version":3,"file":"vue.js","sources":["../src/core/observer/dep.ts","../src/core/observer/array.ts","../src/core/utils/lang.ts","../src/core/observer/index.ts","../src/core/observer/watcher.ts","../src/core/instance/index.ts","../src/compiler/parse/parse-html.ts","../src/compiler/parse/index.ts","../src/compiler/index.ts","../src/platform/web/entry-runtime-with-compiler.ts"],"sourcesContent":["let id=0\n\nexport class Dep{\n     subs:Watcher[] = []\n     id:number\n\n     static target:Watcher\n\n     constructor(){\n            this.id = id++\n            this.subs = []\n     }\n\n     addSub(sub:Watcher){\n         this.subs.push(sub)\n     }\n\n     removeSub(sub:Watcher){\n         const index = this.subs.indexOf(sub)\n         if(index>-1){\n            this.subs.splice(index,1)\n         }\n     }\n\n     // Dep挂载添加依赖\n     // 建立与Watcher的联系\n     depend(){\n        if(Dep.target){\n            Dep.target.addDep(this)\n        }\n     }\n\n     // 通知依赖更新\n    notify(){\n        const subs = this.subs.slice()\n        for(let i=0;i<subs.length;i++){\n            subs[i].update()\n        }\n    }\n}\n\n\nconst targetStack:Array<Watcher> = []\n\nexport function pushTarget(target:Watcher){\n  targetStack.push(target)\n  Dep.target = target\n}\n\nexport function popTarget(){\n  targetStack.pop()\n  Dep.target = targetStack[targetStack.length-1]\n}","\n// 数组操作拦截\n\n// 需要拦截的方法\nconst methodList = [\n    'push',\n    'pop',\n    'shift',\n    'unshift',\n    'splice',\n    'sort',\n    'reverse'\n]\n\n\nconst arrayProto:any = Array.prototype \n\nconst arrayMethods = Object.create(arrayProto)\n\nfor(let method of methodList) {\n    arrayMethods[method] = function(...args:any[]) {\n        const res = arrayProto[method].apply(this, arguments)\n        const ob = this.__ob__\n\n        let inserted:any\n\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args\n                break;\n            case 'splice':\n                inserted = args.slice(2)\n                break;\n        }\n\n        if(inserted) ob.observerArray(inserted)\n\n        ob?.dep?.notify?.()\n\n        return res\n    }\n}\n\nexport {\n    arrayMethods\n}","\nexport const def = (obj: any, key: string, value: any,isEnum:boolean = false) => {\n    Object.defineProperty(obj, key, {\n        value,\n        enumerable: isEnum,\n        writable: true,\n        configurable: true\n    });\n}\n\nexport const parsePath = (path:string)=>{\n    const segments = path.split('.')\n\n    return function(obj:any){\n        for(let item of segments){\n            if(!obj) return\n            obj = obj[item]\n        }\n    }\n}","import {Dep} from './dep'\nimport {arrayMethods} from './array'\nimport {def} from 'src/core/utils/index'\n\nexport function defineReactive(obj:object,key:string|symbol,val?:any) {\n  const dep = new Dep\n  const argLen = arguments.length\n  if(argLen === 2){\n    val = (obj as any)[key]\n  }\n  Object.defineProperty(obj,key,{\n    get() {\n      const childObj = observer(val)\n      if(Dep.target) {\n        dep.depend()\n        if(childObj){\n          // 触发observer对象中的dep收集\n          childObj.dep.depend()\n          if(Array.isArray(val)){\n            dependArray(val)\n          }\n        }\n      }\n      console.log('getter',dep);\n      return val;\n    },\n    set(newVal) {\n      console.log('setter');\n      if(newVal === val) return;\n      val = newVal;\n      // 目标发生变化，通知订阅者  \n      this.dep.notify()\n    }\n  })\n}\n\n// 将数组的方法挂载到数组对象原型上\nfunction protoAugment(target:any,source:object) {\n  target.__proto__ = source\n}\n\nfunction dependArray(data:any[]){\n  for(let item of data) {\n    item?.__ob__?.dep?.depend?.()\n    if(Array.isArray(item)){\n      dependArray(item)\n    }\n  }\n}\n\n// 将对象所有成员转成响应式\nexport class Observer {\n  dep:Dep\n\n  constructor(data:object) {\n    this.dep = new Dep\n    def(data,'__ob__',this)\n\n    if(Array.isArray(data)) {\n      protoAugment(data,arrayMethods)\n      this.observerArray(data)\n    } else if(typeof data === 'object') {\n      this.walk(data)\n    }\n  }\n\n  walk(data:any) {\n    const keys = Reflect.ownKeys(data)\n    for(let key of keys){\n      defineReactive(data,key)\n    }\n  }\n\n  observerArray(data:Array<any>) {\n   for(let item of data) {\n     observer(item)\n   }\n  }\n\n}\n\nexport function observer(obj:any){\n  if(typeof obj !== 'object' || obj === null) return;\n  let ob;\n  if(obj.__ob__){\n    ob = obj.__ob__\n  } else {\n    ob = new Observer(obj)\n  }\n\n  return ob\n}\n\n","\nimport { \n    parsePath\n} from \"../utils\";\nimport {\n    Dep,\n    pushTarget,\n    popTarget\n}  from \"./dep\";\n\nlet id = 0\n\n\nexport class Watcher {\n    vm: Component\n    expOrFn:string|Function\n    cb: Function\n    getter:Function\n    id:number\n    newVal: any\n    oldVal:any\n    deps:Array<Dep>\n    depIds:Set<number>\n    lazy?:boolean\n\n    constructor(vm:Component, expOrFn:string|Function, cb:Function,options:WatcherOptions){\n        this.vm = vm;\n        this.cb = cb;\n        this.expOrFn = expOrFn;\n        this.id = id++;\n        this.deps = []\n        this.depIds = new Set\n\n        if(options){\n            this.lazy = !!options.lazy;\n        }\n\n        if(typeof expOrFn === 'string'){\n            this.getter = parsePath(expOrFn);\n        } else {\n            this.getter = expOrFn;\n        }\n\n        \n\n\n        this.newVal = this.get()\n    }\n\n    get(){\n        pushTarget(this as Watcher);\n        const value  = this.getter(this.vm)\n        this.oldVal = this.newVal;\n        this.newVal = value;\n        popTarget();\n    }\n\n    run(){\n\n\n    }\n\n    update(){\n        this.cb(this.newVal, this.oldVal)\n    }\n\n    // 收集相关的dep\n    addDep(dep:Dep){\n        // 防止重复添加同一个dep\n        if(!this.depIds.has(dep.id))\n        this.depIds.add(dep.id)\n        dep.addSub(this)\n    }\n\n    // 当前watcher依赖的所有dep\n    depend(){\n    }\n\n    // 移除dep\n    removeDep(){\n\n    }\n\n    // 从与自身相关的dep中移除\n    teardown(){\n        for(let item of this.deps){\n            item.removeSub(this)\n        }\n    }\n}\n\n","import { defineReactive } from \"../observer\";\nimport {Watcher} from \"../observer/watcher\";\n class Vue{\n     static defineReactive:Function = defineReactive\n        static Watcher:Function=Watcher\n }\n\n\n\nexport default Vue;\n","\n\n// import {createVNode} from 'src/core/vdom/vnode'\n\n\n// DOCTYPE标签\nconst doctypeReg = /^<!DOCTYPE [^>]+>/i\n\n// 开始标签开放正则\nconst startTagOpenReg = /^<([\\w\\-]+)/\n\n// 属性正则\nconst attributeReg = /^[\\s]+([(\\w\\-]+)[\\s]*=[\\s]*\\\"([^\"]*?)\\\"/\n\n// 自闭和标签正则\nconst unaryReg = /^\\s+\\/>/\n\n// 开始标签闭合正则\nconst startTagCloseReg = /^[\\s]*>/\n\n// 结束标签\nconst endTagReg = /^<\\/([\\w\\-]+)>/\n\n// 注释\nconst commentReg = /^<!--([\\s\\S]*?)-->/\n\n\n\ntype MatchType = Array<string>\n\n\ninterface TagAttr{\n    name:string,\n    value:string\n}\ninterface ParseOption {\n    // 开始标签hook\n    start?:(tag:string, attrs:Array<TagAttr>,isUnary:boolean ,startIndex?:number,endIndex?:number) => void,\n    // 结束标签hook\n    end?:(tag:string,startIndex?:number,endIndex?:number) => void,\n    // 文本hook\n    text?:(text:string,startIndex?:number,endIndex?:number) => void,\n    // 注释hook\n    comment?:(text:string,startIndex?:number,endIndex?:number) => void,\n}\n\n\ninterface Tag {\n    tag:string,\n    attrs:Array<TagAttr>,\n}\n\nexport function parseHTML(html:HTMLTemplate,option:ParseOption):void{\n    let startIndex:number=0,\n    endIndex:number=0,\n    index:number=0\n\n \n    \n    while(html){\n        // DOCTYPE标签\n        if(doctypeReg.test(html)){\n            const match = (html.match(doctypeReg)) as MatchType\n            crop(match[0])\n            continue\n            \n        }\n\n        // 注释\n        if(commentReg.test(html)){\n            const match = (html.match(commentReg.source)) as MatchType\n            crop(match[0])\n            \n            option.comment?.(match[1],startIndex,endIndex)\n            continue\n        }\n\n        // 开始标签\n        if(startTagOpenReg.test(html)){\n            const tagObj:Tag = {\n                tag:'',\n                attrs:[]\n            }\n           const match = (html.match(startTagOpenReg)) as MatchType\n             crop(match[0])\n             tagObj.tag = match[1]\n             parseTagAttr(tagObj)\n            continue\n        }\n\n        // 闭合标签\n        if(endTagReg.test(html)){\n            const match = (html.match(endTagReg)) as MatchType\n            crop(match[0])\n            option.end?.(match[1],startIndex,endIndex)\n            continue\n        }\n\n        /**\n         * 以上正则都不满足，则为文本\n         */\n        if(html.includes('<')){\n            const i = html.indexOf('<')\n            const text = html.slice(0,i)\n            crop(text) \n            // if(['','\\n'].includes(text)) continue\n            option.text?.(text,startIndex,endIndex)\n            continue\n        }\n\n        crop(html)\n    }\n\n    // 匹配标签属性\n    function parseTagAttr(tagObj:Tag):void{\n\n        while(attributeReg.test(html)){\n            const match = (html.match(attributeReg)) as MatchType\n            crop(match[0])\n            const attrObj:TagAttr = {\n                name:match[1],\n                value:match[2]||''\n            }\n            tagObj.attrs.push(attrObj)\n        }\n        parseTagClose(tagObj)\n    }\n\n    // 匹配标签闭合\n    function parseTagClose(tagObj:Tag){\n        if(startTagCloseReg.test(html)){\n            const match = (html.match(startTagCloseReg)) as MatchType\n            crop(match[0])\n            option.start?.(tagObj.tag,tagObj.attrs,false,startIndex,endIndex)\n            return\n        }\n        if(unaryReg.test(html)){\n            const match = (html.match(unaryReg)) as MatchType\n            crop(match[0])\n            option.start?.(tagObj.tag,tagObj.attrs,true,startIndex,endIndex)\n        }\n            \n    }\n\n    // 剪裁html中已经匹配的字符串\n    function crop(str:string){\n        // console.log(str);\n        \n        const len = str.length\n        html = html.substring(len)\n        startIndex = index\n        index+=len\n        endIndex = index\n        // console.log(startIndex,endIndex,index);\n    }\n\n    \n\n}\n\n","import {parseHTML} from './parse-html'\n\n\n\n\ninterface ASTVNode{\n    type:VNodeType,\n    tag?:string,\n    attrs?:Array<object>,\n    text?:string,   \n}\n\ninterface ASTElement{\n    type:VNodeType.ELEMENT,\n    tag:string,\n    attrs:Array<object>,\n    children:Array<ASTVNode>,\n    parent?:ASTElement|null,\n}\n\n/**\n * @description 创建抽象语法树节点\n */\nfunction createASTElement(tag: string, attrs: any, parent: ASTElement|null):ASTElement {\n    return {\n        type:VNodeType.ELEMENT,\n        tag,\n        attrs,\n        children: [],\n        parent,\n    }\n}\n\n// 创建抽象文本节点\nfunction createASTText(text: string):ASTVNode {\n  return {\n    type:VNodeType.TEXT,\n    text,\n  } \n}\n\n\n\nexport function parse(template:HTMLTemplate){\n    const stack:ASTElement[] = []\n    let root:ASTElement|null = null\n    parseHTML(template,{\n        start(tag,attrs,isUnary){\n            console.log('start',tag,attrs);\n            const currentNode = stack[stack.length-1]||null\n            const newNode = createASTElement(tag,attrs,currentNode)\n            stack.push(newNode)\n            if(!root){\n                root = newNode\n            }\n            if(!currentNode) {\n                if(isUnary) {\n                    stack.pop()\n                }\n                return\n            }\n            currentNode.children.push(newNode)\n            if(isUnary) {\n                stack.pop()\n            }\n        },\n        end(tag){\n            console.log('end',tag);\n            stack.pop()\n        },\n        // comment(text){\n        //    console.log('comment',text);\n\n        // },\n        text(text){\n            console.log('text',text);\n            const currentNode = stack[stack.length-1]||null\n            if(!currentNode) return\n            text = text.trim()\n            if(['\\n',''].includes(text)) return\n            const newNode = createASTText(text)\n            currentNode.children.push(newNode)\n            \n        }   \n    })\n\n    return root\n}\n\n","\nimport {parse} from './parse'\n\n\nexport function compiler(template:HTMLTemplate):void{\n    const ast = parse(template)\n    console.log('ast',ast);\n}\n","import Vue from './runtime/index'\nimport { compiler } from 'src/compiler'\n\n(Vue as any).compiler = compiler\nexport default Vue"],"names":["id"],"mappings":"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"}